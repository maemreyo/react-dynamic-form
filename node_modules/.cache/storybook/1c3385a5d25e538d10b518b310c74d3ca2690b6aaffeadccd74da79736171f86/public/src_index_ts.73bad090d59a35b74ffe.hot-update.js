"use strict";
self["webpackHotUpdate_matthew_ngo_react_dynamic_form"]("src_index_ts",{

/***/ "./src/features/dynamic-form/hooks/useFormFields.ts":
/*!**********************************************************!*\
  !*** ./src/features/dynamic-form/hooks/useFormFields.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_hook_form__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-hook-form */ "./node_modules/react-hook-form/dist/index.esm.mjs");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils */ "./src/features/dynamic-form/utils/formUtils.ts");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils */ "./src/features/dynamic-form/utils/conditionalRendering.ts");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils */ "./src/features/dynamic-form/utils/fieldUtils.ts");
// Filepath: /src/features/dynamic-form/hooks/useFormFields.ts
// src/features/dynamic-form/hooks/useFormFields.ts



/**
 * Custom hook to generate form fields from data and config.
 *
 * @param config - The form configuration.
 * @param formState - The `react-hook-form` form state.
 * @param control - The `react-hook-form` control object.
 * @param globalValidationMessages - Optional global validation messages.
 * @returns An object containing the form fields and the fields to render.
 */
function useFormFields(config, formState, control, globalValidationMessages) {
    // @ts-expect-error
    var _a = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false), update = _a[0], setUpdate = _a[1];
    // Thêm useEffect để force re-render khi config thay đổi
    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {
        setUpdate(function (prev) { return !prev; });
    }, [config]);
    var flattenedConfig = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(function () { return (0,_utils__WEBPACK_IMPORTED_MODULE_1__.flattenConfig)(config); }, [config]);
    var conditionalFieldsConfig = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(function () {
        return Object.keys(config)
            .filter(function (fieldId) {
            var _a;
            return config[fieldId].conditional &&
                typeof ((_a = config[fieldId].conditional) === null || _a === void 0 ? void 0 : _a.when) === 'string';
        })
            .map(function (fieldId) {
            var _a, _b;
            return ({
                when: config[fieldId].conditional.when,
                operator: config[fieldId].conditional.operator || 'is',
                value: (_a = config[fieldId].conditional) === null || _a === void 0 ? void 0 : _a.value,
                comparator: (_b = config[fieldId].conditional) === null || _b === void 0 ? void 0 : _b.comparator,
                fields: config[fieldId].conditional.fields || [],
            });
        });
    }, [config]);
    var watchedValues = (0,react_hook_form__WEBPACK_IMPORTED_MODULE_2__.useWatch)({
        control: control,
        name: conditionalFieldsConfig.map(function (condition) { return condition.when; }),
    });
    var fieldsToRender = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(function () {
        return Object.keys(config).filter(function (fieldId) {
            return (0,_utils__WEBPACK_IMPORTED_MODULE_3__.shouldRenderField)(fieldId, conditionalFieldsConfig, watchedValues);
        });
    }, [config, conditionalFieldsConfig, watchedValues]);
    var fields = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(function () { return (0,_utils__WEBPACK_IMPORTED_MODULE_4__.getFields)(flattenedConfig, formState, globalValidationMessages); }, [flattenedConfig, formState, globalValidationMessages]);
    return { fields: fields, fieldsToRender: fieldsToRender, conditionalFieldsConfig: conditionalFieldsConfig };
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (useFormFields);


/***/ })

});
//# sourceMappingURL=src_index_ts.73bad090d59a35b74ffe.hot-update.js.map