{"code":"// Filepath: /src/features/dynamic-form/hooks/useFormFields.ts\n// src/features/dynamic-form/hooks/useFormFields.ts\nimport { useMemo, useState, useEffect } from 'react';\nimport { useWatch } from 'react-hook-form';\nimport { shouldRenderField, getFields, flattenConfig } from '../utils';\n/**\n * Custom hook to generate form fields from data and config.\n *\n * @param config - The form configuration.\n * @param formState - The `react-hook-form` form state.\n * @param control - The `react-hook-form` control object.\n * @returns An object containing the form fields and the fields to render.\n */\nfunction useFormFields(config, formState, control) {\n    // @ts-expect-error\n    const [update, setUpdate] = useState(false);\n    // Thêm useEffect để force re-render khi config thay đổi\n    useEffect(() => {\n        setUpdate((prev) => !prev);\n    }, [config]);\n    const flattenedConfig = useMemo(() => flattenConfig(config), [config]);\n    const conditionalFieldsConfig = useMemo(() => Object.keys(config)\n        .filter((fieldId) => config[fieldId].conditional &&\n        typeof config[fieldId].conditional?.when === 'string')\n        .map((fieldId) => ({\n        when: config[fieldId].conditional.when,\n        operator: config[fieldId].conditional.operator || 'is',\n        value: config[fieldId].conditional?.value,\n        comparator: config[fieldId].conditional?.comparator,\n        fields: config[fieldId].conditional.fields || [],\n    })), [config]);\n    const watchedValues = useWatch({\n        control,\n        name: conditionalFieldsConfig.map((condition) => condition.when),\n    });\n    const fieldsToRender = useMemo(() => Object.keys(config).filter((fieldId) => shouldRenderField(fieldId, conditionalFieldsConfig, watchedValues)), [config, conditionalFieldsConfig, watchedValues]);\n    const fields = useMemo(() => getFields(flattenedConfig, formState), [flattenedConfig, formState]);\n    return { fields, fieldsToRender, conditionalFieldsConfig };\n}\nexport default useFormFields;\n//# sourceMappingURL=useFormFields.js.map","references":["/Users/matthewngo/Documents/dev/projects/react-dynamic-form/node_modules/@types/react/index.d.ts","/Users/matthewngo/Documents/dev/projects/react-dynamic-form/src/features/dynamic-form/types.ts","/Users/matthewngo/Documents/dev/projects/react-dynamic-form/node_modules/react-hook-form/dist/index.d.ts","/Users/matthewngo/Documents/dev/projects/react-dynamic-form/src/features/dynamic-form/utils/index.ts"],"map":"{\"version\":3,\"file\":\"useFormFields.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../src/features/dynamic-form/hooks/useFormFields.ts\"],\"names\":[],\"mappings\":\"AAAA,8DAA8D;AAC9D,mDAAmD;AACnD,OAAO,EAAE,OAAO,EAAE,QAAQ,EAAE,SAAS,EAAE,MAAM,OAAO,CAAC;AAErD,OAAO,EAAa,QAAQ,EAAW,MAAM,iBAAiB,CAAC;AAC/D,OAAO,EAAE,iBAAiB,EAAE,SAAS,EAAE,aAAa,EAAE,MAAM,UAAU,CAAC;AAEvE;;;;;;;GAOG;AACH,SAAS,aAAa,CACpB,MAAkB,EAClB,SAAgC,EAChC,OAA4B;IAM5B,mBAAmB;IACnB,MAAM,CAAC,MAAM,EAAE,SAAS,CAAC,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC;IAE5C,wDAAwD;IACxD,SAAS,CAAC,GAAG,EAAE;QACb,SAAS,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC;IAC7B,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC;IAEb,MAAM,eAAe,GAAG,OAAO,CAAC,GAAG,EAAE,CAAC,aAAa,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC;IAEvE,MAAM,uBAAuB,GAAG,OAAO,CACrC,GAAG,EAAE,CACH,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC;SAChB,MAAM,CACL,CAAC,OAAO,EAAE,EAAE,CACV,MAAM,CAAC,OAAO,CAAC,CAAC,WAAW;QAC3B,OAAO,MAAM,CAAC,OAAO,CAAC,CAAC,WAAW,EAAE,IAAI,KAAK,QAAQ,CACxD;SACA,GAAG,CAAC,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;QACjB,IAAI,EAAE,MAAM,CAAC,OAAO,CAAC,CAAC,WAAY,CAAC,IAAI;QACvC,QAAQ,EAAE,MAAM,CAAC,OAAO,CAAC,CAAC,WAAY,CAAC,QAAQ,IAAI,IAAI;QACvD,KAAK,EAAE,MAAM,CAAC,OAAO,CAAC,CAAC,WAAW,EAAE,KAAK;QACzC,UAAU,EAAE,MAAM,CAAC,OAAO,CAAC,CAAC,WAAW,EAAE,UAAU;QACnD,MAAM,EAAE,MAAM,CAAC,OAAO,CAAC,CAAC,WAAY,CAAC,MAAM,IAAI,EAAE;KAClD,CAAC,CAAC,EACP,CAAC,MAAM,CAAC,CACT,CAAC;IAEF,MAAM,aAAa,GAAG,QAAQ,CAAC;QAC7B,OAAO;QACP,IAAI,EAAE,uBAAuB,CAAC,GAAG,CAAC,CAAC,SAAS,EAAE,EAAE,CAAC,SAAS,CAAC,IAAI,CAAC;KACjE,CAAC,CAAC;IAEH,MAAM,cAAc,GAAG,OAAO,CAC5B,GAAG,EAAE,CACH,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,CAAC,OAAO,EAAE,EAAE,CACrC,iBAAiB,CAAC,OAAO,EAAE,uBAAuB,EAAE,aAAa,CAAC,CACnE,EACH,CAAC,MAAM,EAAE,uBAAuB,EAAE,aAAa,CAAC,CACjD,CAAC;IAEF,MAAM,MAAM,GAAG,OAAO,CACpB,GAAG,EAAE,CAAC,SAAS,CAAC,eAAe,EAAE,SAAS,CAAC,EAC3C,CAAC,eAAe,EAAE,SAAS,CAAC,CAC7B,CAAC;IAEF,OAAO,EAAE,MAAM,EAAE,cAAc,EAAE,uBAAuB,EAAE,CAAC;AAC7D,CAAC;AAED,eAAe,aAAa,CAAC\"}"}
